import{e as V,j as ee,h as te,J as N,f as ne,d as oe,o as h,s as p,q as c,G as d,l as u,v as D,x as E,a as S,K as se,L as re,M as ae}from"./vue-9111343b.js";import{n as x}from"./effector-vue-composition-f339d5b3.js";import{a as A,a0 as ie,a1 as le,a2 as ce,a3 as R,a4 as de,a5 as ue,a6 as me,a7 as fe,a8 as ge,a9 as _e,aa as he,ab as pe,ac as ye,ad as ve,ae as we,af as Ee,ag as De,ah as xe,ai as Se}from"./element-plus-903805b6.js";import{k as ke,y as be,x as y,$ as O}from"./effector-storage-9a361a45.js";import{i as Ie}from"./patronum-da9a1d66.js";import"./effector-77000f8f.js";import"./lodash-es-0b3e6462.js";import"./async-validator-dee29e8b.js";import"./vueuse-core-7723dc9b.js";import"./ctrl-f8748455.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const Pe="modulepreload",$e=function(e){return"/triangles/vue/dist/"+e},B={},C=function(t,o,r){if(!o||o.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(o.map(n=>{if(n=$e(n),n in B)return;B[n]=!0;const a=n.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(!!r)for(let g=s.length-1;g>=0;g--){const _=s[g];if(_.href===n&&(!a||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${i}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":Pe,a||(l.as="script",l.crossOrigin=""),l.href=n,document.head.appendChild(l),a)return new Promise((g,_)=>{l.addEventListener("load",g),l.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};function Me(){const e=A(!1),t=r=>{e.value=r.matches},o=window.matchMedia("(max-width: 767px)");return V(()=>{t(o),o.addEventListener("change",t)}),ee(()=>{o.removeEventListener("change",t)}),{isMobile:e}}const Le=ke("app"),m=Le.createDomain("triangles");function Ne(e){var t=()=>({get(){},set(){}});return t.keyArea=e,t}function Re({storage:e,sync:t=!1,serialize:o=JSON.stringify,deserialize:r=JSON.parse}){var s=(n,a)=>(t&&typeof addEventListener<"u"&&addEventListener("storage",i=>{i.storageArea===e&&(i.key===n&&a(i.newValue),i.key===null&&a(null))}),{get(i){var f=i!==void 0?i:e.getItem(n);return i===void 0&&f===null?void 0:r(f)},set(i){e.setItem(n,o(i))}});return s.keyArea=e,s}function Be(){try{return typeof localStorage<"u"}catch{return!1}}function Ce(e){return t=>be({adapter:Be()?Re({storage:localStorage,sync:!0,...e,...t}):Ne("local"),...e,...t})}const z="triangles",F="_",Ve=Ce({keyPrefix:z+F});function Ae(e,t){Ve({store:e,key:t})}function Oe(e){const t=z+F+e;return localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):null}const v=m.createStore([]),ht=m.createStore([{x:0,y:0,name:"0"},{x:1e3,y:0,name:"1000"},{x:0,y:1e3,name:"1000"}]);m.createEvent();const ze=m.createStore(null),Fe=v.map(e=>e[e.length-1]||null);m.createEvent();const Te=m.createEvent();y({clock:Te,fn:()=>[],target:v});const w=m.createStore([]);Ae(w,"main-dots");const Xe=w.map(e=>{const t=new Map;return e.forEach((o,r)=>{r===0?(t.set(1,o),t.set(2,o)):r===1?(t.set(3,o),t.set(4,o)):r===2&&(t.set(5,o),t.set(6,o))}),t}),Ye=m.createEvent();y({clock:Ye,target:w});const Ue=[{x:500,y:100,name:"A"},{x:100,y:900,name:"B"},{x:900,y:900,name:"C"}],We=m.createEvent(),T=m.createEffect(()=>Oe("main-dots")||Ue);y({clock:We,target:T});y({clock:T.doneData,target:w});const pt=w.map(e=>{if(e.length!==3)return[];const[t,o,r]=e;return[{from:t,to:o},{from:o,to:r},{from:r,to:t}]});function He(){return Math.floor(Math.random()*6)+1}function Je(e,t){const o=(e.x+t.x)/2,r=(e.y+t.y)/2;return{x:o,y:r}}function X(e){let t=e[0].x,o=e[0].x,r=e[0].y,s=e[0].y;for(let n=1;n<e.length;n++){let a=e[n];t=Math.min(a.x,t),o=Math.max(a.x,o),r=Math.min(a.y,r),s=Math.max(a.y,s)}return{minX:t,maxX:o,minY:r,maxY:s}}function je(e,t){const{minX:o,maxX:r,minY:s,maxY:n}=X(t);if(e.x<o||e.x>r||e.y<s||e.y>n)return!1;let a=!1;for(let i=0,f=t.length-1;i<t.length;f=i++){const l=t[i],g=t[f];l.y>e.y!=g.y>e.y&&e.x<(g.x-l.x)*(e.y-l.y)/(g.y-l.y)+l.x&&(a=!a)}return a}function qe(e){const{minX:t,maxX:o,minY:r,maxY:s}=X(e);let n;do n={x:Math.random()*(o-t)+t,y:Math.random()*(s-r)+r};while(!je(n,e));return n}function Ke(e){const t=[...e.dots],o=[...e.mainDots],r=new Map(e.dotsByNumber),s=e.firstDot;let n=e.lastDot;if(n){const a=He(),i=r.get(a);if(i){const f=Je(n,i);f&&t.push(f)}}else{const a=s||qe(o);t.push(a)}return t}const Y=m.createEvent(),U=m.createEvent(),k=m.createEvent(),W=Ie({timeout:1e3/600,start:U,stop:k}),b=m.createStore(1e4),Ge=W.isRunning,I=m.createEffect(Ke);y({source:{dots:v,mainDots:w,lastDot:Fe,firstDot:ze,dotsByNumber:Xe},clock:Y,fn:e=>e,target:I});y({source:I.doneData,target:v});O({source:[v,b],clock:W.tick,filter:([e,t])=>e.length<t,target:Y});O({source:b,clock:I.doneData,filter:(e,t)=>t.length>=e,target:k});const Qe=te({components:{VideoPause:ie,VideoPlay:le,Setting:ce,DotsSettings:N(()=>C(()=>import("./DotsSettings-35c99d81.js"),["assets/DotsSettings-35c99d81.js","assets/effector-vue-composition-f339d5b3.js","assets/effector-77000f8f.js","assets/element-plus-903805b6.js","assets/lodash-es-0b3e6462.js","assets/vue-9111343b.js","assets/async-validator-dee29e8b.js","assets/vueuse-core-7723dc9b.js","assets/ctrl-f8748455.js","assets/effector-storage-9a361a45.js","assets/patronum-da9a1d66.js","assets/DotsSettings-0f702790.css"])),PlaceForDrawing:N(()=>C(()=>import("./PlaceForDrawing-3eaf1eeb.js"),["assets/PlaceForDrawing-3eaf1eeb.js","assets/effector-vue-composition-f339d5b3.js","assets/effector-77000f8f.js","assets/element-plus-903805b6.js","assets/lodash-es-0b3e6462.js","assets/vue-9111343b.js","assets/async-validator-dee29e8b.js","assets/vueuse-core-7723dc9b.js","assets/ctrl-f8748455.js","assets/effector-storage-9a361a45.js","assets/patronum-da9a1d66.js","assets/PlaceForDrawing-3f0361d0.css"]))},setup(){const{isMobile:e}=Me(),t=x(v),o=x(b),r=x(Ge),s=300,n=`${s}px`,a=A(!1);V(()=>{window.addEventListener("resize",i),i()}),ne(()=>{window.removeEventListener("resize",i)}),oe(r,g=>{g&&(a.value=!1)});function i(){document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)}function f(){r.value?k():U()}function l(){a.value=!1}return{isMobile:e,isShowedDrawer:a,dots:t,limit:o,asideWidth:s,asideWidthInPx:n,isDrawing:r,handleClickToggleButton:f,handleResetSettings:l}}});const Ze=(e,t)=>{const o=e.__vccOpts||e;for(const[r,s]of t)o[r]=s;return o},et=e=>(se("data-v-860f0433"),e=e(),re(),e),tt=et(()=>S("div",{class:"aside-title"},[S("h2",null,"Settings")],-1)),nt={class:"main-content"};function ot(e,t,o,r,s,n){const a=d("DotsSettings"),i=d("el-scrollbar"),f=d("el-aside"),l=d("el-drawer"),g=d("Setting"),_=d("el-icon"),P=d("el-button"),$=d("el-text"),J=d("VideoPause"),j=d("VideoPlay"),q=d("el-header"),K=d("PlaceForDrawing"),G=d("el-main"),Q=d("el-link"),Z=d("el-footer"),M=d("el-container");return h(),p(M,{class:"layout"},{default:c(()=>[e.isMobile?D("",!0):(h(),p(f,{key:0,class:"aside",width:e.asideWidthInPx},{default:c(()=>[u(i,null,{default:c(()=>[tt,u(a,{onReset:e.handleResetSettings},null,8,["onReset"])]),_:1})]),_:1},8,["width"])),u(l,{modelValue:e.isShowedDrawer,"onUpdate:modelValue":t[0]||(t[0]=L=>e.isShowedDrawer=L),direction:"ltr",title:"Settings",class:"drawer"},{default:c(()=>[u(a,{onReset:e.handleResetSettings},null,8,["onReset"])]),_:1},8,["modelValue"]),u(M,{class:"content"},{default:c(()=>[u(q,{class:"header"},{default:c(()=>[e.isMobile?(h(),p(P,{key:0,link:"",size:"large",class:"header-button settings-button",onClick:t[1]||(t[1]=L=>e.isShowedDrawer=!e.isShowedDrawer)},{default:c(()=>[u(_,{size:"24"},{default:c(()=>[u(g)]),_:1})]),_:1})):D("",!0),u($,{tag:"h1"},{default:c(()=>[E(" Dots: "+R(e.dots.length)+". Limit: "+R(e.limit),1)]),_:1}),e.isMobile?(h(),p(P,{key:1,link:"",size:"large",class:"header-button toggle-button",onClick:e.handleClickToggleButton},{default:c(()=>[u(_,{size:"24"},{default:c(()=>[e.isDrawing?(h(),p(J,{key:0})):(h(),p(j,{key:1}))]),_:1})]),_:1},8,["onClick"])):D("",!0)]),_:1}),u(G,{class:"main"},{default:c(()=>[u(i,null,{default:c(()=>[S("div",nt,[u(K)])]),_:1})]),_:1}),u(Z,{class:"footer"},{default:c(()=>[u($,null,{default:c(()=>[E("Â© "),u(Q,{href:"http://mobdiz.ru/"},{default:c(()=>[E("MobDiz")]),_:1}),E(" (Oleg Kazannikov)")]),_:1})]),_:1})]),_:1})]),_:1})}const st=Ze(Qe,[["render",ot],["__scopeId","data-v-860f0433"]]);const rt={install:e=>{e.component("el-container",de),e.component("el-aside",ue),e.component("el-drawer",me),e.component("el-scrollbar",fe),e.component("el-form",ge),e.component("el-form-item",_e),e.component("el-input",he),e.component("el-input-number",pe),e.component("el-button",ye),e.component("el-header",ve),e.component("el-footer",we),e.component("el-main",Ee),e.component("el-text",De),e.component("el-link",xe),e.component("el-icon",Se)}},H=ae(st);H.use(rt);H.mount("#app");export{Ge as $,Ze as _,w as a,ze as b,k as c,U as d,C as e,ht as f,pt as g,v as h,We as l,Te as r,Ye as s,Me as u};
