import{h as re,i as ye,g as _e,o as se,d as ve,J as j,b as we,a as Ee,e as P,q as $,l as m,G as f,k as p,t as z,x as A,v as T,K as ke,L as xe,M as Se}from"./vue-ed055f58.js";import{n as be,T as De,a as q,b as G}from"./effector-77000f8f.js";import{$ as Q,a as Pe,r as ae,a0 as Z,a1 as $e,a2 as Ie,a3 as Me,a4 as Ne,a5 as Le,a6 as Ce,a7 as Re,a8 as Ae,a9 as Be,aa as Ve,ab as Oe,ac as ze,ad as Fe,ae as Te,af as Xe}from"./element-plus-6af6d38e.js";import{f as Ye,g as Ue,s as We}from"./element-plus-icons-vue-8791fc18.js";import{k as He,u as X,n as Je,p as Ke,a as je,b as qe,c as Ge,y as ee,x as E,$ as Y,S as b,i as Qe}from"./patronum-8b39ea45.js";import"./lodash-es-0b3e6462.js";import"./async-validator-dee29e8b.js";import"./vueuse-core-cbbd5524.js";import"./ctrl-f8748455.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const Ze="modulepreload",et=function(e){return"/triangles/vue/dist/"+e},te={},ne=function(t,o,s){if(!o||o.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(o.map(r=>{if(r=et(r),r in te)return;te[r]=!0;const a=r.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(!!s)for(let u=n.length-1;u>=0;u--){const v=n[u];if(v.href===r&&(!a||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${i}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":Ze,a||(l.as="script",l.crossOrigin=""),l.href=r,document.head.appendChild(l),a)return new Promise((u,v)=>{l.addEventListener("load",u),l.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};function tt(e,t,o){let s=[De.run({fn:n=>t(n)})];if(o){let n=q({node:s}),r=e.graphite.id,a=o.additionalLinks,i=a[r]||[];return a[r]=i,i.push(n),()=>{let c=i.indexOf(n);c!==-1&&i.splice(c,1),G(n)}}{let n=q({node:s,parent:[e],family:{owners:e}});return()=>{G(n)}}}function nt(e,t){return t?t.getState(e):e.getState()}function ot(){let e,t=_e(),o=t==null?void 0:t.appContext.config.globalProperties.scopeName;return o&&(e=ye(o)),{scopeName:o,scope:e}}function F(e){be.store(e)||rt("expect useStore argument to be a store");let{scope:t}=ot(),o=nt(e,t),s=Q(o),n=tt(e,r=>{s.value=Q(r).value},t);return re(()=>{n()}),Pe(s)}let rt=e=>{throw Error(e)};function st(){const e=ae(!1),t=s=>{e.value=s.matches},o=window.matchMedia("(max-width: 767px)");return se(()=>{t(o),o.addEventListener("change",t)}),re(()=>{o.removeEventListener("change",t)}),{isMobile:e}}const at=He("app"),h=at.createDomain("triangles");var oe=new Map,ie=X();function it(e){return t=>function({adapter:o,store:s,source:n=s,target:r=s,clock:a=n,done:i,fail:c=ie,finally:l,pickup:u,key:v,keyPrefix:k=""}){if(!o)throw Error("Adapter is not defined");if(!n)throw Error("Store or source is not defined");if(!r)throw Error("Target is not defined");if(!v&&n.shortName===n.id)throw Error("Key or name is not defined");if(n===r&&!Je.store(n))throw Error("Source must be different from target");var x=v||n.shortName,N=function(d,y){var g=oe.get(d);g===void 0&&(g=new Map,oe.set(d,g));var _=g.get(y);return _!==void 0||(_=Ke(null,{serialize:"ignore"}),g.set(y,_)),_}(o.keyArea||o,k+x),L=je(),C=()=>Ge(L),R=d=>({status:y,params:g,result:_,error:D})=>y==="done"?{status:y,key:x,keyPrefix:k,operation:d,value:d==="get"?_:g}:{status:y,key:x,keyPrefix:k,operation:d,value:g,error:D};return qe(L,()=>{var d=ee(),y=ee(),g=X(),_=g.filterMap(({status:w,key:S,keyPrefix:B,operation:V,value:O})=>w==="done"?{key:S,keyPrefix:B,operation:V,value:O}:void 0),D=g.filterMap(({status:w,key:S,keyPrefix:B,operation:V,error:O,value:he})=>w==="fail"?{key:S,keyPrefix:B,operation:V,error:O,value:he}:void 0),J=o(k+x,d);d.use(J.get),y.use(J.set);var K=X();E({source:n,clock:a,target:K}),Y({source:E(N,K,(w,S)=>[S,w]),filter:([w,S])=>w!==S,target:y.prepend(([w])=>w)}),b({from:[d.doneData,y],to:N}),b({from:[d.doneData,N],to:r}),b({from:[d.finally.map(R("get")),y.finally.map(R("set"))],to:g}),b({from:D,to:c}),i&&b({from:_,to:i}),l&&b({from:g,to:l}),u?b({from:u,to:d.prepend(()=>{})}):d()}),C.unsubscribe=C}({...e,...t})}ie.watch(e=>console.error(e.error));var lt=it();function ct(e){var t=()=>({get(){},set(){}});return t.keyArea=e,t}function ut({storage:e,sync:t=!1,serialize:o=JSON.stringify,deserialize:s=JSON.parse}){var n=(r,a)=>(t&&typeof addEventListener<"u"&&addEventListener("storage",i=>{i.storageArea===e&&(i.key===r&&a(i.newValue),i.key===null&&a(null))}),{get(i){var c=i!==void 0?i:e.getItem(r);return i===void 0&&c===null?void 0:s(c)},set(i){e.setItem(r,o(i))}});return n.keyArea=e,n}function dt(){try{return typeof localStorage<"u"}catch{return!1}}function mt(e){return t=>lt({adapter:dt()?ut({storage:localStorage,sync:!0,...e,...t}):ct("local"),...e,...t})}const le="triangles",ce="_",ft=mt({keyPrefix:le+ce});function pt(e,t){ft({store:e,key:t})}function gt(e){const t=le+ce+e;return localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):null}const I=h.createStore([]),Ht=h.createStore([{x:0,y:0,name:"0"},{x:1e3,y:0,name:"1000"},{x:0,y:1e3,name:"1000"}]);h.createEvent();const ht=h.createStore(null),yt=I.map(e=>e[e.length-1]||null);h.createEvent();const _t=h.createEvent();E({clock:_t,fn:()=>[],target:I});const M=h.createStore([]);pt(M,"main-dots");const vt=M.map(e=>{const t=new Map;return e.forEach((o,s)=>{s===0?(t.set(1,o),t.set(2,o)):s===1?(t.set(3,o),t.set(4,o)):s===2&&(t.set(5,o),t.set(6,o))}),t}),wt=h.createEvent();E({clock:wt,target:M});const Et=[{x:500,y:100,name:"A"},{x:100,y:900,name:"B"},{x:900,y:900,name:"C"}],kt=h.createEvent(),ue=h.createEffect(()=>gt("main-dots")||Et);E({clock:kt,target:ue});E({clock:ue.doneData,target:M});const Jt=M.map(e=>{if(e.length!==3)return[];const[t,o,s]=e;return[{from:t,to:o},{from:o,to:s},{from:s,to:t}]});function xt(){return Math.floor(Math.random()*6)+1}function St(e,t){const o=(e.x+t.x)/2,s=(e.y+t.y)/2;return{x:o,y:s}}function de(e){let t=e[0].x,o=e[0].x,s=e[0].y,n=e[0].y;for(let r=1;r<e.length;r++){let a=e[r];t=Math.min(a.x,t),o=Math.max(a.x,o),s=Math.min(a.y,s),n=Math.max(a.y,n)}return{minX:t,maxX:o,minY:s,maxY:n}}function bt(e,t){const{minX:o,maxX:s,minY:n,maxY:r}=de(t);if(e.x<o||e.x>s||e.y<n||e.y>r)return!1;let a=!1;for(let i=0,c=t.length-1;i<t.length;c=i++){const l=t[i],u=t[c];l.y>e.y!=u.y>e.y&&e.x<(u.x-l.x)*(e.y-l.y)/(u.y-l.y)+l.x&&(a=!a)}return a}function Dt(e){const{minX:t,maxX:o,minY:s,maxY:n}=de(e);let r;do r={x:Math.random()*(o-t)+t,y:Math.random()*(n-s)+s};while(!bt(r,e));return r}function Pt(e){const t=[...e.dots],o=[...e.mainDots],s=new Map(e.dotsByNumber),n=e.firstDot;let r=e.lastDot;if(r){const a=xt(),i=s.get(a);if(i){const c=St(r,i);c&&t.push(c)}}else{const a=n||Dt(o);t.push(a)}return t}const me=h.createEvent(),fe=h.createEvent(),U=h.createEvent(),pe=Qe({timeout:1e3/600,start:fe,stop:U}),W=h.createStore(1e4),$t=pe.isRunning,H=h.createEffect(Pt);E({source:{dots:I,mainDots:M,lastDot:yt,firstDot:ht,dotsByNumber:vt},clock:me,fn:e=>e,target:H});E({source:H.doneData,target:I});Y({source:[I,W],clock:pe.tick,filter:([e,t])=>e.length<t,target:me});Y({source:W,clock:H.doneData,filter:(e,t)=>t.length>=e,target:U});const It=ve({components:{VideoPause:Ye,VideoPlay:Ue,Setting:We,DotsSettings:j(()=>ne(()=>import("./DotsSettings-f648ba90.js"),["assets/DotsSettings-f648ba90.js","assets/vue-ed055f58.js","assets/element-plus-6af6d38e.js","assets/lodash-es-0b3e6462.js","assets/async-validator-dee29e8b.js","assets/vueuse-core-cbbd5524.js","assets/element-plus-icons-vue-8791fc18.js","assets/ctrl-f8748455.js","assets/effector-77000f8f.js","assets/patronum-8b39ea45.js","assets/DotsSettings-0f702790.css"])),PlaceForDrawing:j(()=>ne(()=>import("./PlaceForDrawing-3d8243d7.js"),["assets/PlaceForDrawing-3d8243d7.js","assets/vue-ed055f58.js","assets/element-plus-6af6d38e.js","assets/lodash-es-0b3e6462.js","assets/async-validator-dee29e8b.js","assets/vueuse-core-cbbd5524.js","assets/element-plus-icons-vue-8791fc18.js","assets/ctrl-f8748455.js","assets/effector-77000f8f.js","assets/patronum-8b39ea45.js","assets/PlaceForDrawing-3f0361d0.css"]))},setup(){const{isMobile:e}=st(),t=F(I),o=F(W),s=F($t),n=300,r=`${n}px`,a=ae(!1);se(()=>{window.addEventListener("resize",i),i()}),we(()=>{window.removeEventListener("resize",i)}),Ee(s,u=>{u&&(a.value=!1)});function i(){document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)}function c(){s.value?U():fe()}function l(){a.value=!1}return{isMobile:e,isShowedDrawer:a,dots:t,limit:o,asideWidth:n,asideWidthInPx:r,isDrawing:s,handleClickToggleButton:c,handleResetSettings:l}}});const Mt=(e,t)=>{const o=e.__vccOpts||e;for(const[s,n]of t)o[s]=n;return o},Nt=e=>(ke("data-v-860f0433"),e=e(),xe(),e),Lt=Nt(()=>T("div",{class:"aside-title"},[T("h2",null,"Settings")],-1)),Ct={class:"main-content"};function Rt(e,t,o,s,n,r){const a=f("DotsSettings"),i=f("el-scrollbar"),c=f("el-aside"),l=f("el-drawer"),u=f("Setting"),v=f("el-icon"),k=f("el-button"),x=f("el-text"),N=f("VideoPause"),L=f("VideoPlay"),C=f("el-header"),R=f("PlaceForDrawing"),d=f("el-main"),y=f("el-link"),g=f("el-footer"),_=f("el-container");return P(),$(_,{class:"layout"},{default:m(()=>[e.isMobile?z("",!0):(P(),$(c,{key:0,class:"aside",width:e.asideWidthInPx},{default:m(()=>[p(i,null,{default:m(()=>[Lt,p(a,{onReset:e.handleResetSettings},null,8,["onReset"])]),_:1})]),_:1},8,["width"])),p(l,{modelValue:e.isShowedDrawer,"onUpdate:modelValue":t[0]||(t[0]=D=>e.isShowedDrawer=D),direction:"ltr",title:"Settings",class:"drawer"},{default:m(()=>[p(a,{onReset:e.handleResetSettings},null,8,["onReset"])]),_:1},8,["modelValue"]),p(_,{class:"content"},{default:m(()=>[p(C,{class:"header"},{default:m(()=>[e.isMobile?(P(),$(k,{key:0,link:"",size:"large",class:"header-button settings-button",onClick:t[1]||(t[1]=D=>e.isShowedDrawer=!e.isShowedDrawer)},{default:m(()=>[p(v,{size:"24"},{default:m(()=>[p(u)]),_:1})]),_:1})):z("",!0),p(x,{tag:"h1"},{default:m(()=>[A(" Dots: "+Z(e.dots.length)+". Limit: "+Z(e.limit),1)]),_:1}),e.isMobile?(P(),$(k,{key:1,link:"",size:"large",class:"header-button toggle-button",onClick:e.handleClickToggleButton},{default:m(()=>[p(v,{size:"24"},{default:m(()=>[e.isDrawing?(P(),$(N,{key:0})):(P(),$(L,{key:1}))]),_:1})]),_:1},8,["onClick"])):z("",!0)]),_:1}),p(d,{class:"main"},{default:m(()=>[p(i,null,{default:m(()=>[T("div",Ct,[p(R)])]),_:1})]),_:1}),p(g,{class:"footer"},{default:m(()=>[p(x,null,{default:m(()=>[A("© "),p(y,{href:"http://mobdiz.ru/"},{default:m(()=>[A("MobDiz")]),_:1}),A(" (Oleg Kazannikov)")]),_:1})]),_:1})]),_:1})]),_:1})}const At=Mt(It,[["render",Rt],["__scopeId","data-v-860f0433"]]);const Bt={install:e=>{e.component("el-container",$e),e.component("el-aside",Ie),e.component("el-drawer",Me),e.component("el-scrollbar",Ne),e.component("el-form",Le),e.component("el-form-item",Ce),e.component("el-input",Re),e.component("el-input-number",Ae),e.component("el-button",Be),e.component("el-header",Ve),e.component("el-footer",Oe),e.component("el-main",ze),e.component("el-text",Fe),e.component("el-link",Te),e.component("el-icon",Xe)}},ge=Se(At);ge.use(Bt);ge.mount("#app");export{$t as $,Mt as _,M as a,ht as b,U as c,fe as d,ne as e,Ht as f,Jt as g,I as h,kt as l,F as n,_t as r,wt as s,st as u};
