import{y as A,u as l,x as u,v as $,z as k,A as D,B as h,C as T,q as I,D as q,$ as z}from"./index-c3a14737.js";function J(t){var e=()=>({get(){},set(){}});return e.keyArea=t,e}function O({storage:t,sync:e=!1,serialize:n=JSON.stringify,deserialize:r=JSON.parse}){var i=(s,o)=>(e&&typeof addEventListener<"u"&&addEventListener("storage",a=>{a.storageArea===t&&(a.key===s&&o(a.newValue),a.key===null&&o(null))}),{get(a){var c=a!==void 0?a:t.getItem(s);return a===void 0&&c===null?void 0:r(c)},set(a){t.setItem(s,n(a))}});return i.keyArea=t,i}function W(){try{return typeof localStorage<"u"}catch{return!1}}function _(t){return e=>A({adapter:W()?O({storage:localStorage,sync:!0,...t,...e}):J("local"),...t,...e})}const b="triangles",p="_",C=_({keyPrefix:b+p});function L(t,e){C({store:t,key:e})}function V(t){const e=b+p+t;return localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):null}const x=l.createStore([]);L(x,"main-dots");const G=x.map(t=>{const e=new Map;return t.forEach((n,r)=>{r===0?(e.set(1,n),e.set(2,n)):r===1?(e.set(3,n),e.set(4,n)):r===2&&(e.set(5,n),e.set(6,n))}),e}),H=l.createEvent();u({clock:H,target:x});const K=[{x:500,y:100,name:"A"},{x:100,y:900,name:"B"},{x:900,y:900,name:"C"}],Q=l.createEvent(),w=l.createEffect(()=>V("main-dots")||K);u({clock:Q,target:w});u({clock:w.doneData,target:x});const ct=x.map(t=>{if(t.length!==3)return[];const[e,n,r]=t;return[{from:e,to:n},{from:n,to:r},{from:r,to:e}]});function U(t){var{timeout:e,start:n,stop:r,leading:i=!1,trailing:s=!1}=t,o=$({name:"tick",sid:"u782pl"}),a=k(!1,{name:"$isRunning",sid:"-xegewf"}),c=Z(e),m=a.map(g=>!g),f=$({name:"saveTimeout",sid:"ab3q7d"}),P=k(null,{name:"$timeoutId",sid:"-aj5rja"}).on(f,(g,d)=>{var{timeoutId:v}=d;return v}),S=k(()=>{},{name:"$rejecter",sid:"opb0ih"}).on(f,(g,d)=>{var{reject:v}=d;return v}),y=D({and:{source:{timeout:c,running:a},effect:g=>{var{timeout:d,running:v}=g;return v?new Promise((X,Y)=>{var F=setTimeout(X,d);f({timeoutId:F,reject:Y})}):Promise.reject()}},or:{name:"timeoutFx",sid:"9hil7b"}}),R=D({and:{source:{timeoutId:P,rejecter:S},effect:g=>{var{timeoutId:d,rejecter:v}=g;v(),d&&clearTimeout(d)}},or:{name:"cleanupFx",sid:"-v02m7d"}});if(h({and:[{clock:n,source:c,filter:m,target:y}],or:{sid:"-vop0ii"}}),i){var B=h({and:[{clock:n,filter:m}],or:{name:"onReady",sid:"-cmw7lh"}});u({and:[{clock:B,target:o}],or:{sid:"-v876ny"}})}return u({and:[{clock:n,fn:()=>!0,target:a}],or:{sid:"-v6jsxl"}}),h({and:[{clock:y.done,source:c,filter:a,target:y}],or:{sid:"-urpcwu"}}),h({and:[{clock:y.done,filter:a,target:o.prepend(()=>{})}],or:{sid:"-ucb4aq"}}),r&&(s&&u({and:[{clock:r,target:o}],or:{sid:"6lcn0o"}}),a.on(r,()=>!1),u({and:[{clock:r,target:R}],or:{sid:"71ao6f"}})),{tick:o,isRunning:a}}function Z(t){if(T.store(t,{sid:"7icamc"}))return t;if(typeof t=="number")return k(t,{and:{name:"$timeout"},sid:"knc3em"});throw new TypeError('timeout parameter in interval method should be number or Store. "'.concat(typeof t,'" was passed'))}function tt(){return Math.floor(Math.random()*6)+1}function et(t,e){const n=(t.x+e.x)/2,r=(t.y+e.y)/2;return{x:n,y:r}}function N(t){let e=t[0].x,n=t[0].x,r=t[0].y,i=t[0].y;for(let s=1;s<t.length;s++){let o=t[s];e=Math.min(o.x,e),n=Math.max(o.x,n),r=Math.min(o.y,r),i=Math.max(o.y,i)}return{minX:e,maxX:n,minY:r,maxY:i}}function nt(t,e){const{minX:n,maxX:r,minY:i,maxY:s}=N(e);if(t.x<n||t.x>r||t.y<i||t.y>s)return!1;let o=!1;for(let a=0,c=e.length-1;a<e.length;c=a++){const m=e[a],f=e[c];m.y>t.y!=f.y>t.y&&t.x<(f.x-m.x)*(t.y-m.y)/(f.y-m.y)+m.x&&(o=!o)}return o}function rt(t){const{minX:e,maxX:n,minY:r,maxY:i}=N(t);let s;do s={x:Math.random()*(n-e)+e,y:Math.random()*(i-r)+r};while(!nt(s,t));return s}function at(t){console.log("getDotsWithNew",t);const e=[...t.dots],n=[...t.mainDots],r=new Map(t.dotsByNumber),i=t.firstDot;let s=t.lastDot;if(s){const o=tt(),a=r.get(o);if(a){const c=et(s,a);c&&e.push(c)}}else{const o=i||rt(n);e.push(o)}return e}const j=l.createEvent(),ot=l.createEvent(),st=l.createEvent(),E=U({timeout:1e3/60,start:ot,stop:st}),ut=E.isRunning,M=l.createEffect(at);u({source:{dots:I,mainDots:x,lastDot:q,firstDot:z,dotsByNumber:G},clock:j,fn:t=>t,target:M});u({source:M.doneData,target:I});u({clock:E.tick,target:j});export{ut as $,x as a,H as b,ot as c,ct as d,Q as l,st as s};
